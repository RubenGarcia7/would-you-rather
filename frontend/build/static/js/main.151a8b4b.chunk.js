(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{187:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a(0),n=a(40),c=a.n(n),l=a(18),o=a(41),i=a(10),d="SET_AUTHED_USER",u="REMOVE_AUTHED_USER";var j=a(43),p=a(11),b=a(31),h=a.n(b),O=a(66),m=a(22),_=a(208);var f=a(80),v=a.n(f),x={id:"Mike",avatar:"https://randomuser.me/api/portraits/men/49.jpg",createdPolls:["98c1e68-3320-4157-18w7-84c2d1e7zxf1v"],answeredPolls:[],points:1},y={id:"Carol",avatar:"https://randomuser.me/api/portraits/women/2.jpg",createdPolls:[],answeredPolls:[],points:0},g={id:"Jennifer",avatar:"https://randomuser.me/api/portraits/women/3.jpg",createdPolls:[],answeredPolls:["17w1v628-192q-1537-12x4-11a131j3tb6p"],points:1},w={id:"Victor",avatar:"https://randomuser.me/api/portraits/men/16.jpg",createdPolls:[],answeredPolls:[],points:0};function N(e){var t=e.firstQuestion,a=e.secondQuestion;return{author:e.author,id:Object(_.a)(),firstQuestion:t,secondQuestion:a,answeredBy:[],firstQuestionReplies:0,secondQuestionReplies:0,totalReplies:0}}function U(){return(U=Object(O.a)(h.a.mark((function e(t){var a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.firstQuestion,s=t.secondQuestion,r=t.author,e.abrupt("return",new Promise((function(e,t){e(N({author:r,firstQuestion:a,secondQuestion:s}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("http://localhost:5000/api/users");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("http://localhost:5000/api/polls");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();function R(e){return function(e){return U.apply(this,arguments)}(e)}var E="RECEIVE_USERS",Q="ADD_NEW_POLL_TO_USER",k="ADD_ANSWERED_POLL_TO_USER";var C="RECEIVE_POLLS",L="ADD_POLL",I="ANSWER_POLL";function F(e,t){return function(a,s){return R({author:s().authedUser,firstQuestion:e,secondQuestion:t}).then((function(e){var t,s;a(function(e){return{type:L,payload:{poll:e}}}(e)),a((t=e.author,s=e.id,{type:Q,payload:{user:t,pollId:s}})),a(B()),a(D())}))}}function A(e,t){return function(a,s){var r=s().authedUser;a(function(e,t,a){return{type:I,payload:{id:e,user:t,option:a}}}(e,r,t)),a({type:k,payload:{user:r,pollId:e}}),a(B()),a(D())}}var B=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t,a){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().polls,e.next=3,v.a.post("http://localhost:5000/api/polls",s).then((function(e){t({type:"SAVE_POLLS",payload:{polls:e.data}})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},D=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t,a){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().users,e.next=3,v.a.post("http://localhost:5000/api/users",s).then((function(e){t({type:"SAVE_USERS",payload:{users:e.data}})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};var q=Object(o.combineReducers)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{id:t.payload.id,avatar:t.payload.avatar};case u:return null;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(p.a)(Object(p.a)({},e),t.payload.users);case Q:return Object(p.a)(Object(p.a)({},e),{},Object(j.a)({},t.payload.user.id,Object(p.a)(Object(p.a)({},e[t.payload.user.id]),{},{createdPolls:e[t.payload.user.id].createdPolls.concat(t.payload.pollId),points:e[t.payload.user.id].points+1})));case k:return Object(p.a)(Object(p.a)({},e),{},Object(j.a)({},t.payload.user.id,Object(p.a)(Object(p.a)({},e[t.payload.user.id]),{},{answeredPolls:e[t.payload.user.id].answeredPolls.concat(t.payload.pollId),points:e[t.payload.user.id].points+1})));default:return e}},polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(p.a)(Object(p.a)({},e),t.payload.polls);case L:return Object(p.a)(Object(p.a)({},e),{},Object(j.a)({},t.payload.poll.id,t.payload.poll));case I:return t.payload.option===e[t.payload.id].firstQuestion?Object(p.a)(Object(p.a)({},e),{},Object(j.a)({},t.payload.id,Object(p.a)(Object(p.a)({},e[t.payload.id]),{},{answeredBy:e[t.payload.id].answeredBy.concat(t.payload.user.id),firstQuestionReplies:e[t.payload.id].firstQuestionReplies+1,totalReplies:e[t.payload.id].totalReplies+1}))):Object(p.a)(Object(p.a)({},e),{},Object(j.a)({},t.payload.id,Object(p.a)(Object(p.a)({},e[t.payload.id]),{},{answeredBy:e[t.payload.id].answeredBy.concat(t.payload.user.id),secondQuestionReplies:e[t.payload.id].secondQuestionReplies+1,totalReplies:e[t.payload.id].totalReplies+1})));default:return e}}}),T=a(142),W=function(e){return function(t){return function(a){console.group(a.type),console.log("The action: ",a);var s=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),s}}},V=Object(o.applyMiddleware)(T.a,W),z=(a(186),a(187),a(12)),H=a(204),J=a(206),M=a(209),G=[{text:x.id,value:x.id,image:{avatar:!0,src:x.avatar}},{text:y.id,value:y.id,image:{avatar:!0,src:y.avatar}},{text:g.id,value:g.id,image:{avatar:!0,src:g.avatar}},{text:w.id,value:w.id,image:{avatar:!0,src:w.avatar}}];var Y=Object(i.b)((function(e){return{authedUser:e.authedUser}}))((function(e){var t=e.dispatch,a=Object(r.useState)(""),n=Object(m.a)(a,2),c=n[0],l=n[1],o=Object(r.useState)(""),i=Object(m.a)(o,2),u=i[0],j=i[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),h=b[0],O=b[1],_=Object(z.e)();return Object(s.jsx)("div",{className:"login-form align-center shadow-slim",children:Object(s.jsxs)("div",{className:"login-form__container",children:[Object(s.jsx)("h3",{children:'Welcome to "Would you Rather"!'}),Object(s.jsx)("p",{children:"Select a user to start using the app"}),Object(s.jsx)(H.a,{className:"login-form__select",placeholder:"Select user",options:G,onChange:function(e){var t=e.target,a=t.children[1].innerText,s=t.children[0].currentSrc;l(a),j(s)}}),!0===h?Object(s.jsx)(J.a,{error:!0,content:"Please select a user before proceeding"}):null,Object(s.jsx)(M.a,{className:"login-form__btn",onClick:function(e){""!==c?(!0===h&&O(!1),t(function(e,t){return{type:d,payload:{id:e,avatar:t}}}(c,u)),_.push("/home")):O(!0)},children:"Sign Up"})]})})})),K=function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Y,{})})};var X=Object(i.b)((function(e){return{authedUser:e.authedUser}}))((function(e){var t=e.authedUser,a=e.dispatch,r=Object(z.e)();return Object(s.jsx)("nav",{className:"navbar",children:Object(s.jsxs)("div",{className:"navbar__container main-container",children:[Object(s.jsx)("div",{className:"navbar__left",children:Object(s.jsxs)("ul",{className:"navbar__left-list",children:[Object(s.jsx)("li",{className:"navbar__left-list__item active",children:Object(s.jsx)(l.c,{to:"/home",activeClassName:"active",children:"Home"})}),Object(s.jsx)("li",{className:"navbar__left-list__item active",children:Object(s.jsx)(l.c,{to:"/add",activeClassName:"active",children:"Create Poll"})}),Object(s.jsx)("li",{className:"navbar__left-list__item active",children:Object(s.jsx)(l.c,{to:"/leaderboard",activeClassName:"active",children:"Leaderboard"})})]})}),Object(s.jsx)("div",{className:"navbar__right",children:Object(s.jsxs)("ul",{className:"navbar__right-list",children:[Object(s.jsxs)("li",{className:"navbar__right-list__item",children:[Object(s.jsx)("img",{src:t.avatar,className:"navbar__right-list__item-img"}),Object(s.jsx)("span",{className:"navbar__right-list__item-name",children:t.id})]}),Object(s.jsx)("li",{className:"navbar__right-list__item",children:Object(s.jsx)(M.a,{onClick:function(){a({type:u}),r.push("/")},children:"Logout"})})]})})]})})}));var Z=Object(i.b)((function(e,t){return{authedUser:e.authedUser,poll:e.polls[t.id]}}))((function(e){var t=e.authedUser,a=e.poll,r=Object(z.e)(),n=a.author,c=a.firstQuestion,l=a.secondQuestion,o=a.id,i=a.answeredBy;return Object(s.jsxs)("div",{className:"poll",children:[Object(s.jsxs)("div",{className:"poll__head",children:[Object(s.jsx)("div",{className:"poll__head-left",children:Object(s.jsx)("img",{src:n.avatar,className:"poll__head-left__img shadow-xs"})}),Object(s.jsx)("div",{className:"poll__head-right",children:Object(s.jsx)("span",{className:"poll__head-right__name",children:n.id})})]}),Object(s.jsxs)("div",{className:"poll__body",children:[Object(s.jsx)("p",{className:"poll__body-title",children:"Would you rather..."}),Object(s.jsxs)("p",{className:"poll__body-questions",children:[c,Object(s.jsx)("br",{}),"or... ",Object(s.jsx)("br",{}),l]}),Object(s.jsx)(M.a,{onClick:function(){r.push("questions/".concat(o))},className:"poll__body-btn",children:i.includes(t.id)?"See Results":"Answer Poll"})]})]})}));var $=Object(i.b)((function(e){var t=e.authedUser,a=e.polls,s=Object.fromEntries(Object.entries(a).filter((function(e){var a=Object(m.a)(e,2);a[0];return a[1].answeredBy.includes(t.id)}))),r=Object.fromEntries(Object.entries(a).filter((function(e){var a=Object(m.a)(e,2);a[0];return!a[1].answeredBy.includes(t.id)})));return{authedUser:t,polls:a,pollIds:Object.keys(a),answeredPollIds:Object.keys(s),unansweredPollIds:Object.keys(r)}}))((function(e){var t=e.unansweredPollIds,a=e.answeredPollIds,n=Object(r.useState)("unanswered"),c=Object(m.a)(n,2),l=c[0],o=c[1],i=function(e){o(e.target.innerText.toLowerCase())};return Object(s.jsxs)("div",{className:"home-panel main-container",children:[Object(s.jsxs)(M.a.Group,{className:"home-panel__btn-group",children:[Object(s.jsx)(M.a,{onClick:i,className:"home-panel__btn-group__btn ".concat("unanswered"===l?"positive":""),children:"Unanswered"}),Object(s.jsx)(M.a,{onClick:i,className:"home-panel__btn-group__btn ".concat("answered"===l?"positive":""),children:"Answered"})]}),Object(s.jsx)("div",{className:"home-panel__list",children:"unanswered"===l?t.map((function(e){return Object(s.jsx)(Z,{id:e},e)})):a.map((function(e){return Object(s.jsx)(Z,{id:e},e)}))})]})})),ee=function(){return Object(s.jsxs)("div",{className:"error-message",children:[Object(s.jsx)("p",{children:"You don't have permission to see this. Please log in before proceeding."}),Object(s.jsx)(l.b,{to:"/",children:"Log in"})]})};var te=Object(i.b)((function(e){return{authedUser:e.authedUser}}))((function(e){var t=e.authedUser;return Object(s.jsx)(s.Fragment,{children:null!==t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(X,{}),Object(s.jsx)($,{})]}):Object(s.jsx)(ee,{})})})),ae=a(205);var se=Object(i.b)((function(e){return{authedUser:e.authedUser,polls:e.polls}}))((function(e){var t=e.dispatch,a=(e.authedUser,Object(r.useState)("")),n=Object(m.a)(a,2),c=n[0],l=n[1],o=Object(r.useState)(""),i=Object(m.a)(o,2),d=i[0],u=i[1],j=Object(z.e)();return Object(s.jsx)("div",{className:"poll-form shadow-slim",children:Object(s.jsxs)(ae.a,{className:"poll-form__form",onSubmit:function(){t(F(c,d)),j.push("/home")},children:[Object(s.jsx)("span",{className:"poll-form__form-span",children:"Would you rather..."}),Object(s.jsx)(ae.a.Field,{children:Object(s.jsx)("input",{placeholder:"First question...",onChange:function(e){l(e.target.value)}})}),Object(s.jsx)("span",{className:"poll-form__form-or",children:"Or..."}),Object(s.jsx)(ae.a.Field,{children:Object(s.jsx)("input",{placeholder:"Second question...",onChange:function(e){u(e.target.value)}})}),Object(s.jsx)(M.a,{type:"submit",className:"poll-form__form-btn",children:"Create New Poll"})]})})}));var re=Object(i.b)((function(e){return{authedUser:e.authedUser}}))((function(e){var t=e.authedUser;return Object(s.jsx)(s.Fragment,{children:null!==t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(X,{}),Object(s.jsx)("p",{className:"new-poll__title main-container align-center",children:"Create New Poll"}),Object(s.jsx)(se,{})]}):Object(s.jsx)(ee,{})})}));var ne=Object(i.b)((function(e,t){return{user:e.users[t.id]}}))((function(e){var t=e.user,a=t.id,r=t.avatar,n=t.createdPolls,c=t.answeredPolls,l=t.points;return Object(s.jsxs)("div",{className:"lead-card shadow-slim",children:[Object(s.jsxs)("div",{className:"lead-card__left",children:[Object(s.jsx)("img",{src:r,className:"lead-card__left-img"}),Object(s.jsx)("p",{className:"lead-card__left-name",children:a})]}),Object(s.jsxs)("div",{className:"lead-card__center",children:[Object(s.jsxs)("p",{className:"lead-card__center-questions lead-card__center-questions--answered",children:["Polls answered: ",c.length]}),Object(s.jsxs)("p",{className:"lead-card__center-questions lead-card__center-questions--created",children:["Polls created: ",n.length]})]}),Object(s.jsx)("div",{className:"lead-card__right",children:Object(s.jsxs)("p",{className:"lead-card__right-score",children:[l," points"]})})]})}));var ce=Object(i.b)((function(e){var t=e.authedUser,a=e.users,s=Object.fromEntries(Object.entries(a).sort((function(e,t){return t[1].points-e[1].points})));return{authedUser:t,users:a,sortedUserIds:Object.keys(s)}}))((function(e){var t=e.authedUser,a=e.sortedUserIds;return Object(s.jsx)(s.Fragment,{children:null!==t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(X,{}),Object(s.jsxs)("div",{className:"leader-board",children:[Object(s.jsx)("h3",{className:"leader-board__title",children:"Leaderboard"}),Object(s.jsx)("div",{className:"leader-board__list",children:a.map((function(e){return Object(s.jsx)(ne,{id:e},e)}))})]})]}):Object(s.jsx)(ee,{})})})),le=a(207);var oe=Object(i.b)((function(e,t){var a=e.authedUser,s=e.polls;return{authedUser:a,polls:s,poll:s[t.id]}}))((function(e){var t=e.poll,a=e.authedUser,n=e.dispatch,c=Object(r.useState)(""),o=Object(m.a)(c,2),i=o[0],d=o[1],u=t.author,j=t.firstQuestion,p=t.secondQuestion,b=t.id,h=t.answeredBy,O=t.firstQuestionReplies,_=t.secondQuestionReplies,f=t.totalReplies,v=function(e){d(e.target.textContent)};return Object(s.jsxs)("div",{className:"poll-answer",children:[Object(s.jsxs)("div",{className:"poll-answer__head",children:[Object(s.jsx)("div",{className:"poll-answer__head-left",children:Object(s.jsx)("img",{src:u.avatar,className:"poll-answer__head-left__img shadow-xs"})}),Object(s.jsx)("div",{className:"poll-answer__head-right",children:Object(s.jsx)("span",{className:"poll-answer__head-right__name",children:u.id})})]}),Object(s.jsxs)("div",{className:"poll-answer__body",children:[Object(s.jsx)("p",{className:"poll-answer__body-title",children:"Would you rather..."}),h.includes(a.id)?Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:j}),Object(s.jsx)(le.a,{progress:"percent",percent:O/f*100,success:i===j,size:"large"}),Object(s.jsxs)("p",{className:"poll-answer__body-result",children:[O," out of ",f," votes"]}),Object(s.jsx)("p",{children:p}),Object(s.jsx)(le.a,{progress:"percent",percent:_/f*100,success:i===p,size:"large"}),Object(s.jsxs)("p",{className:"poll-answer__body-result",children:[_," out of ",f," votes"]}),Object(s.jsx)(l.b,{to:"/home",children:Object(s.jsx)(M.a,{children:"Back"})})]}):Object(s.jsxs)(ae.a,{onSubmit:function(e){e.preventDefault(),n(A(b,i))},className:"poll-answer__body-form",children:[Object(s.jsxs)(ae.a.Group,{children:[Object(s.jsx)(ae.a.Radio,{className:"poll-answer__body-form__option",label:j,value:j,checked:i===j,onChange:v}),Object(s.jsx)(ae.a.Radio,{className:"poll-answer__body-form__option",label:p,value:p,checked:i===p,onChange:v})]}),Object(s.jsx)(ae.a.Button,{className:"poll-answer__body-btn",children:"Submit"})]})]})]})}));var ie=Object(i.b)((function(e,t){var a=e.authedUser,s=e.polls;return{id:t.match.params.id,authedUser:a,polls:s,pollIds:Object.keys(s)}}))((function(e){var t=e.id,a=(e.polls,e.pollIds),r=e.authedUser;return Object(s.jsx)(s.Fragment,{children:null!==r?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(X,{}),Object(s.jsx)("div",{className:"answer-poll-panel main-container",children:a.filter((function(e){return e===t})).map((function(e){return Object(s.jsx)(oe,{id:e},e)}))})]}):Object(s.jsx)(ee,{})})}));function de(){return function(e){return Promise.all([P(),S()]).then((function(e){var t=Object(m.a)(e,2);return{users:t[0],polls:t[1]}})).then((function(t){var a=t.users,s=t.polls;e(function(e){return{type:E,payload:{users:e}}}(a)),e(function(e){return{type:C,payload:{polls:e}}}(s))}))}}var ue=Object(i.b)((function(e){return{authedUser:e.authedUser}}))((function(e){e.authedUser,e.loading;var t=e.dispatch;return Object(r.useEffect)((function(){t(de())}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(z.a,{path:"/",exact:!0,component:K}),Object(s.jsx)(z.a,{path:"/home",component:te}),Object(s.jsx)(z.a,{path:"/add",component:re}),Object(s.jsx)(z.a,{path:"/leaderboard",component:ce}),Object(s.jsx)(z.a,{path:"/questions/:id",component:ie})]})})})),je=a(144),pe=Object(o.createStore)(q,Object(je.composeWithDevTools)(V));c.a.render(Object(s.jsx)(i.a,{store:pe,children:Object(s.jsx)(l.a,{children:Object(s.jsx)(ue,{})})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.151a8b4b.chunk.js.map