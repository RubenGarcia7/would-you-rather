{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Lenovo User/Desktop/Web Development Projects/2. React Developer Nanodegree/would-you-rather/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Lenovo User/Desktop/Web Development Projects/2. React Developer Nanodegree/would-you-rather/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{savePoll}from'../utils/api';import{addNewPollToUser,addAnsweredPollToUser}from'../actions/users';import axios from'axios';export var RECEIVE_POLLS='RECEIVE_POLLS';export var ADD_POLL='ADD_POLL';export var ANSWER_POLL='ANSWER_POLL';export var SAVE_POLLS='SAVE_POLLS';export var SAVE_USERS='SAVE_USERS';export function receivePolls(polls){return{type:RECEIVE_POLLS,payload:{polls:polls}};}function addPoll(poll){return{type:ADD_POLL,payload:{poll:poll}};}function answerPoll(id,user,option){return{type:ANSWER_POLL,payload:{id:id,user:user,option:option}};}export function handleAddPoll(firstQuestion,secondQuestion){return function(dispatch,getState){var _getState=getState(),authedUser=_getState.authedUser;return savePoll({author:authedUser,firstQuestion:firstQuestion,secondQuestion:secondQuestion}).then(function(poll){dispatch(addPoll(poll));dispatch(addNewPollToUser(poll.author,poll.id));dispatch(savePolls());dispatch(saveUsers());});};}export function handleAnswerPoll(id,option){return function(dispatch,getState){var _getState2=getState(),authedUser=_getState2.authedUser;dispatch(answerPoll(id,authedUser,option));dispatch(addAnsweredPollToUser(authedUser,id));dispatch(savePolls());dispatch(saveUsers());};}var savePolls=function savePolls(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var polls;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:polls=getState().polls;_context.next=3;return axios.post('http://localhost:5000/api/polls',polls).then(function(res){dispatch({type:SAVE_POLLS,payload:{polls:res.data}});});case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};var saveUsers=function saveUsers(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var users;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:users=getState().users;_context2.next=3;return axios.post('http://localhost:5000/api/users',users).then(function(res){dispatch({type:SAVE_USERS,payload:{users:res.data}});});case 3:return _context2.abrupt(\"return\",_context2.sent);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/Lenovo User/Desktop/Web Development Projects/2. React Developer Nanodegree/would-you-rather/frontend/src/actions/polls.js"],"names":["savePoll","addNewPollToUser","addAnsweredPollToUser","axios","RECEIVE_POLLS","ADD_POLL","ANSWER_POLL","SAVE_POLLS","SAVE_USERS","receivePolls","polls","type","payload","addPoll","poll","answerPoll","id","user","option","handleAddPoll","firstQuestion","secondQuestion","dispatch","getState","authedUser","author","then","savePolls","saveUsers","handleAnswerPoll","post","res","data","users"],"mappings":"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","sourcesContent":["\r\nimport { savePoll } from '../utils/api'\r\nimport { addNewPollToUser, addAnsweredPollToUser } from '../actions/users'\r\nimport axios from 'axios'\r\n\r\nexport const RECEIVE_POLLS = 'RECEIVE_POLLS'\r\nexport const ADD_POLL = 'ADD_POLL'\r\nexport const ANSWER_POLL = 'ANSWER_POLL'\r\nexport const SAVE_POLLS = 'SAVE_POLLS'\r\nexport const SAVE_USERS = 'SAVE_USERS'\r\n\r\nexport function receivePolls(polls) {\r\n  return {\r\n    type: RECEIVE_POLLS,\r\n    payload: {\r\n      polls\r\n    }\r\n  }\r\n}\r\n\r\nfunction addPoll(poll) {\r\n  return {\r\n    type:  ADD_POLL,\r\n    payload: {\r\n      poll\r\n    }\r\n  }\r\n}\r\n\r\n\r\nfunction answerPoll(id, user, option) {\r\n  return {\r\n    type: ANSWER_POLL,\r\n    payload: {\r\n      id,\r\n      user,\r\n      option\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function handleAddPoll(firstQuestion, secondQuestion) {\r\n  return (dispatch, getState) => {\r\n    const { authedUser } = getState()\r\n\r\n    return savePoll({\r\n      author: authedUser,\r\n      firstQuestion,\r\n      secondQuestion\r\n    })\r\n    .then((poll) => {\r\n      dispatch(addPoll(poll))\r\n      dispatch(addNewPollToUser(poll.author, poll.id))\r\n      dispatch(savePolls())\r\n      dispatch(saveUsers())\r\n    })\r\n  }\r\n}\r\n\r\nexport function handleAnswerPoll(id, option) {\r\n  return (dispatch, getState) => {\r\n    const { authedUser } = getState()\r\n\r\n    dispatch(answerPoll(id, authedUser, option))\r\n    dispatch(addAnsweredPollToUser(authedUser, id))\r\n    dispatch(savePolls())\r\n    dispatch(saveUsers())\r\n  }\r\n}\r\n\r\nconst savePolls = () => async (dispatch, getState) => {\r\n  const polls = getState().polls\r\n\r\n   return await axios.post('http://localhost:5000/api/polls', polls)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: SAVE_POLLS,\r\n        payload: {\r\n          polls: res.data\r\n        }\r\n      })\r\n    })\r\n}\r\n\r\nconst saveUsers = () => async (dispatch, getState) => {\r\n  const users = getState().users\r\n\r\n   return await axios.post('http://localhost:5000/api/users', users)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: SAVE_USERS,\r\n        payload: {\r\n          users: res.data\r\n        }\r\n      })\r\n    })\r\n}\r\n"]},"metadata":{},"sourceType":"module"}